@model Sdl.Web.Mvc.Models.SitemapItem

@{
    Layout = null;
}
<?xml version="1.0" encoding="UTF-8" ?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    @SitemapForPagesInFolder(Model.Items)
</urlset>

@helper SitemapForPagesInFolder(List<SitemapItem> folder)
{
    foreach (var item in folder)
    {
        if (item.Type == "Page")
        {
            <url>
                <loc>@item.Url</loc>
                <lastmod>@item.PublishedDate</lastmod>
            </url>
        }
        else
        {
            @SitemapForPagesInFolder(item.Items);
        }
    }
}
